(function(e){function t(t){for(var o,s,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);h&&h(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,s=1;s<a.length;s++){var i=a[s];0!==r[i]&&(o=!1)}o&&(n.splice(t--,1),e=c(c.s=a[0]))}return e}var o={},s={app:0},r={app:0},n=[];function i(e){return c.p+"js/"+({"group-foo":"group-foo"}[e]||e)+"."+{"group-foo":"71fcc4f5"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"group-foo":1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var o="css/"+({"group-foo":"group-foo"}[e]||e)+"."+{"group-foo":"c4d89f22"}[e]+".css",r=c.p+o,n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var l=n[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===o||u===r))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===o||u===r)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var o=t&&t.target&&t.target.src||r,n=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=o,delete s[e],h.parentNode.removeChild(h),a(n)},h.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){s[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var n=new Promise((function(t,a){o=r[e]=[t,a]}));t.push(o[2]=n);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(h);var a=r[e];if(0!==a){if(a){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",d.name="ChunkLoadError",d.type=o,d.request=s,a[1](d)}r[e]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(a,o,function(t){return e[t]}.bind(null,o));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="https://multer-1258613188.file.myqcloud.com/iot/assets/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var h=u;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"104d":function(e,t,a){e.exports=a("6e92")(683)},"12f2":function(e,t,a){e.exports=a("6e92")(266)},"180a":function(e,t,a){},"1ab2":function(e,t,a){"use strict";a("3cd3")},"299c":function(e,t,a){e.exports=a("6e92")(595)},"2b0e":function(e,t,a){e.exports=a("6e92")(75)},"2bb5":function(e,t,a){e.exports=a("6e92")(315)},3620:function(e,t,a){e.exports=a("6e92")(647)},"3cd3":function(e,t,a){},"41f8":function(e,t,a){e.exports=a("6e92")(594)},"4b2a":function(e,t,a){e.exports=a("6e92")(669)},"4e4b":function(e,t,a){e.exports=a("6e92")(601)},"4ffd":function(e,t,a){e.exports=a.p+"img/logo.30fea7dc.png"},5128:function(e,t,a){e.exports=a("6e92")(314)},5328:function(e,t,a){"use strict";a("57e7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],n=(a("034f"),a("2877")),i={},c=Object(n["a"])(i,s,r,!1,null,null,null),l=c.exports,u=(a("d3b7"),a("3ca3"),a("ddb0"),a("8c4f")),d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"layout"},[o("div",{staticClass:"container-main"},[o("header",{staticClass:"container-header"},[o("el-menu",{staticClass:"nav-menu",attrs:{"default-active":"home",mode:"horizontal","text-color":"#ffffffaa","active-text-color":"#ffd04baa",router:""}},[o("div",{staticClass:"logo-img"},[o("img",{attrs:{src:a("4ffd"),alt:"logo"}})]),o("el-menu-item",{attrs:{index:"home"}},[e._v("首页")]),o("el-menu-item",{attrs:{index:"config"}},[e._v("配置中心")])],1)],1),o("div",{staticClass:"container-body"},[o("keep-alive",[e.$route.meta.keepAlive?o("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():o("router-view")],1)])])},h=[],p={data:function(){return{var:""}}},f=p,m=(a("1ab2"),Object(n["a"])(f,d,h,!1,null,"40dd24b1",null)),g=m.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("html",{staticClass:"main",staticStyle:{width:"100vw",height:"100vh"}},[a("canvas",{attrs:{id:"canvas"}}),a("h3",{staticClass:"title"},[e._v("5102物联网控制平台")]),a("div",{staticClass:"login-container"},[a("form",{attrs:{action:""}},[a("ul",{staticClass:"login-check"},[a("li",{staticClass:"login-title"},[e._v("登录")]),a("li",{staticClass:"login-username"},[a("label",{staticClass:"iconfont icon-wo",attrs:{for:"username"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.username,expression:"model.username"}],attrs:{id:"username"},domProps:{value:e.model.username},on:{input:function(t){t.target.composing||e.$set(e.model,"username",t.target.value)}}})]),a("li",{staticClass:"login-password"},[a("label",{staticClass:"iconfont icon-suo",attrs:{for:"password"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.password,expression:"model.password"}],attrs:{id:"password",type:"password"},domProps:{value:e.model.password},on:{input:function(t){t.target.composing||e.$set(e.model,"password",t.target.value)}}})]),a("li",{staticClass:"login-button"},[a("button",{on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v(" 登录 ")]),a("button",{on:{click:function(t){return t.preventDefault(),e.register(t)}}},[e._v(" 注册 ")])])])])])])},v=[],b=a("1da1"),w=(a("a434"),a("159b"),a("b680"),a("cb29"),a("96cf"),a("8237")),y=a.n(w),C={data:function(){return{model:{}}},methods:{login:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("/login",{user:e.model.username,password:y()(e.model.password)});case 3:a=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return",e.$message.error("登录失败！"));case 9:0===a.data.state&&a.data.token?(localStorage.setItem("iotc_token",a.data.token),localStorage.setItem("iotc_user",e.model.username),e.$message.success(a.data.message),e.$router.push("/home")):e.$message.warning(a.data.message);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},register:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.preventDefault(),a.prev=1,a.next=4,t.$http.post("/register",{user:t.model.username,password:y()(t.model.password)});case 4:o=a.sent,a.next=10;break;case 7:return a.prev=7,a.t0=a["catch"](1),a.abrupt("return",t.$message.error("注册失败！"));case 10:return 0===o.data.state?t.$message.success(o.data.message):t.$message.warning(o.data.message),a.abrupt("return",!1);case 12:case"end":return a.stop()}}),a,null,[[1,7]])})))()},bgd:function(){var e=document.querySelector("#canvas"),t=document.querySelector("html");e.width=t.offsetWidth,e.height=t.offsetHeight;var a,o,s,r,n,i,c=e.getContext("2d"),l=0,u=0,d=0,h=!1;t.addEventListener("mousemove",(function(e){if(e.clientX,e.clientY,d>5&&h){s=e.clientX+100*(Math.random()-.5),r=e.clientY+100*(Math.random()-.5),p.push(f(s,r));var t=p.length;if(t>100)for(var c=0;c<t-100;c++)setTimeout((function(){p.splice(50,1)}),200*Math.random());d=0}d++,a||o?(n=e.clientX-l,i=e.clientY-u,p.forEach((function(e){e.speedX+=n/(800*(Math.random()/10*9+.1)),e.speedY+=i/(800*(Math.random()/10*9+.1))})),l=e.clientX,u=e.clientY):(a=e.clientX,o=e.clientY,l=e.clientX,u=e.clientY)})),e.addEventListener("mousedown",(function(e){h=!0;var t=e.clientX+80*(Math.random()-.5),a=e.clientY+80*(Math.random()-.5);p.push(f(t,a))})),e.addEventListener("mouseup",(function(){h=!1}));var p=[];function f(t,a){var o,s,r="#30bbdd",n=~~(5+2*(Math.random()-.5)),i=4*(1*(Math.random()-.5)/5).toFixed(4),l=4*(1*(Math.random()-.5)/5).toFixed(4);if(void 0==t){var u=~~(e.width*Math.random()),d=~~(e.height*Math.random());o=u+i,s=d+l}else o=t+i,s=a+l;return c.beginPath(),c.arc(o,s,n,0,2*Math.PI),c.fillStyle=r,c.closePath(),c.fill(),{curW:o,curH:s,color:r,r:n,speedX:i,speedY:l,distanceX:o,distanceY:s}}function m(e,t,a,o){return~~Math.sqrt(Math.pow(Math.abs(e-a),2)+Math.pow(Math.abs(t-o),2))}function g(e){for(var t=e.length,a=0;a<t;a++)for(var o=t-1;o>=0;o--){var s=e[a],r=e[o],n=m(s.curW,s.curH,r.curW,r.curH);n>s.r+r.r&&n<100&&s.r-1<r.r<s.r+1&&(c.beginPath(),c.moveTo(s.curW,s.curH),c.lineTo(r.curW,r.curH),c.strokeStyle="#30bbdd",c.lineWidth=s.r/n*10,c.closePath(),c.stroke())}}function _(t){t.forEach((function(a,o){a.speedX>.01&&a.speedY>.01&&(a.speedX-=a.speedX/100,a.speedY-=a.speedY/100),a.curW+=a.speedX,a.curH+=a.speedY,(a.curW>e.width||a.curH>e.height||a.curW<0||a.curH<0)&&t.splice(o,1,f()),c.beginPath(),c.arc(a.curW,a.curH,a.r,0,2*Math.PI),c.fillStyle="#10a0ee",c.closePath(),c.fill()}))}function v(e){c.globalCompositeOperation="destination-over",c.globalAlpha=.7;for(var t=0;t<e;t++)p.push(f())}function b(){c.clearRect(0,0,e.width,e.height),_(p),g(p),window.requestAnimationFrame(b)}v(80),window.requestAnimationFrame(b)}},mounted:function(){this.bgd()}},x=C,S=(a("69dc"),Object(n["a"])(x,_,v,!1,null,"875e1d16",null)),k=S.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home-main"},[a("div",{staticClass:"main-container"},[e._m(0),a("div",{staticClass:"main-body",staticStyle:{color:"#fff"}},[a("div",{staticClass:"ls-item main-body-top"},[a("i"),a("div",{staticClass:"car-select"},[a("el-select",{attrs:{"popper-class":"car-select-item",size:"mini",placeholder:"请选择连接的设备"},on:{change:e.handleChangeCar},model:{value:e.curSelectCar,callback:function(t){e.curSelectCar=t},expression:"curSelectCar"}},e._l(e.carSelectList,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.secret}})})),1)],1),a("div",{staticClass:"car-state",attrs:{title:e.mqttIsConnected?"MQTT服务器已连接":"MQTT服务器未连接"}},[a("div",{class:e.mqttIsConnected?"car-state-connected":"car-state-disconnect"},[a("i",{class:"iconfont "+(e.mqttIsConnected?"icon-B":"icon-duankailianjie1")})])]),a("div",{staticClass:"car-state",attrs:{title:e.controlIsConnected?"云控制服务器已连接":"云控制服务器未连接"}},[a("i",{class:"iconfont icon-zaixian "+(e.controlIsConnected?"car-state-connected":"car-state-disconnect")})]),a("div",{staticClass:"zhenglv",attrs:{title:"帧率"}},[a("i",{staticClass:"iconfont icon-frequency",staticStyle:{color:"yellow","padding-right":"10px"}}),e._v(e._s(e.curEchartsData.camera_frame)+" FPS ")]),a("div",{staticClass:"openImg",attrs:{disabled:!e.propsIsOk["camera_is_abort"],title:e.propsIsOk["camera_is_abort"]?"":"生效中"}},[e._v(" 视频： "),a("div",{class:"img-state "+(e.curEchartsData.camera_is_abort?"cur-img-state":""),on:{click:function(t){return e.handleChangeCameraState(1)}}},[e._v(" 关 ")]),a("div",{class:"img-state "+(e.curEchartsData.camera_is_abort?"":"cur-img-state"),on:{click:function(t){return e.handleChangeCameraState(0)}}},[e._v(" 开 ")])])]),a("div",{staticClass:"ls-item img-container"},[a("i"),a("div",{class:e.curEchartsData.camera_is_abort?"offline":"online"},[e._v(" "+e._s(e.curEchartsData.camera_is_abort?"● offLine":"● Live")+" ")]),a("div",{class:e.propsIsOk["camera_is_abort"]&&e.hasReceiveImgData?"hidden":"is-disabled-0"},[e._v(" "+e._s(e.curEchartsData.camera_is_abort?"视频已断开":"视频连接中...")+" ")]),a("img",{attrs:{id:"imgData"}}),a("div",{staticClass:"downloadImg",attrs:{title:"保存图片"},on:{click:e.handleSaveImg}},[a("i",{staticClass:"iconfont icon-baocuntupian"})])]),a("div",{staticClass:"ls-item main-body-bottom"},[a("i"),a("el-slider",{staticClass:"set-speed-whole",attrs:{min:0,max:200,"show-tooltip":"",vertical:"",height:"120","format-tooltip":function(e){return"设置旋转速度:"+e+"cm/s"}},model:{value:e.curEchartsData.set_dir_speed_whole,callback:function(t){e.$set(e.curEchartsData,"set_dir_speed_whole",t)},expression:"curEchartsData.set_dir_speed_whole"}}),a("el-slider",{staticClass:"duoji-2",attrs:{min:-45,max:135,"show-tooltip":"",vertical:"",step:1,height:"120",disabled:!e.propsIsOk["cur_duoji_2_angle"],title:e.propsIsOk["cur_duoji_2_angle"]?"":"生效中","format-tooltip":function(e){return"二维:"+(e<=0?"下旋"+-e:"上旋"+e)+"°"}},on:{change:function(t){return e.handleChangeDuoji("cur_duoji_2_angle")}},model:{value:e.curEchartsData.cur_duoji_2_angle,callback:function(t){e.$set(e.curEchartsData,"cur_duoji_2_angle",t)},expression:"curEchartsData.cur_duoji_2_angle"}}),a("div",{staticClass:"car-update",attrs:{title:"小车数据更新到云端"},on:{click:function(t){return e.handleSyncData("car")}}},[a("i",{staticClass:"iconfont icon-iconset0349"})]),a("div",{staticClass:"cloud-sync",attrs:{title:"云端数据同步到小车"},on:{click:function(t){return e.handleSyncData("cloud")}}},[a("i",{staticClass:"iconfont icon-ziyuan1412"})]),a("div",{staticClass:"drag-base"}),a("div",{attrs:{id:"drag-gun"}}),a("div",{attrs:{id:"drag-pointer"}}),a("div",{staticClass:"drag-mask"}),a("div",{staticClass:"turn-left",attrs:{title:"左旋"},on:{mousedown:function(t){return e.handleDirChange(1)},mouseup:function(t){return e.handleDirChange(0)},touchstart:function(t){return e.handleDirChange(1)},touchend:function(t){return e.handleDirChange(0)}}},[a("i",{staticClass:"iconfont icon-zuozhuan"})]),a("div",{staticClass:"turn-right",attrs:{title:"右旋"},on:{mousedown:function(t){return e.handleDirChange(-1)},mouseup:function(t){return e.handleDirChange(0)},touchstart:function(t){return e.handleDirChange(-1)},touchend:function(t){return e.handleDirChange(0)}}},[a("i",{staticClass:"iconfont icon-youzhuan"})]),a("el-slider",{staticClass:"duoji-1",attrs:{min:-135,max:135,step:1,"show-tooltip":"",disabled:!e.propsIsOk["cur_duoji_1_angle"],title:e.propsIsOk["cur_duoji_1_angle"]?"":"生效中","format-tooltip":function(e){return"一维:"+(e<=0?"左旋"+-e:"右旋"+e)+"°"}},on:{change:function(t){return e.handleChangeDuoji("cur_duoji_1_angle")}},model:{value:e.curEchartsData.cur_duoji_1_angle,callback:function(t){e.$set(e.curEchartsData,"cur_duoji_1_angle",t)},expression:"curEchartsData.cur_duoji_1_angle"}}),a("div",{staticClass:"speed-level"},[a("div",{class:"speed-level-stage "+(8===e.speedLevel?"cur-speed-level":""),on:{click:function(t){return e.handleSpeedLevel(8)}}},[e._v(" 低速 ")]),a("div",{class:"speed-level-stage "+(4===e.speedLevel?"cur-speed-level":""),on:{click:function(t){return e.handleSpeedLevel(4)}}},[e._v(" 中速 ")]),a("div",{class:"speed-level-stage "+(1===e.speedLevel?"cur-speed-level":""),on:{click:function(t){return e.handleSpeedLevel(1)}}},[e._v(" 高速 ")])]),a("div",{staticClass:"duoji-reset",attrs:{title:"舵机复位"},on:{click:e.handleDuojiReset}},[a("i",{staticClass:"iconfont icon-fuwei"})])],1)]),a("div",{staticClass:"right-aside"},[a("div",{staticClass:"rs-item"},[a("i"),a("div",{class:e.propsIsOk["cur_duoji_1_angle"]?"hidden":"is-disabled-1"},[e._v(" 生效中 ")]),a("div",{class:e.propsIsOk["cur_duoji_2_angle"]?"hidden":"is-disabled-2"},[e._v(" 生效中 ")]),a("div",{attrs:{id:"duoji-angle"}})]),a("div",{staticClass:"rs-item"},[a("i"),a("div",{staticClass:"camera-state-title"},[e._v("摄像头状态")]),a("div",{staticClass:"camera-state-content"},[a("div",{staticClass:"camera-left"},[a("ul",[a("li",[a("i",{staticClass:"iconfont icon-14"}),e._v("对比度："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_contrast"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_contrast"],title:e.propsIsOk["camera_contrast"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_contrast")}},model:{value:e.curEchartsData.camera_contrast,callback:function(t){e.$set(e.curEchartsData,"camera_contrast",t)},expression:"curEchartsData.camera_contrast"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-saturation"}),e._v("饱和度："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_saturation"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_saturation"],title:e.propsIsOk["camera_saturation"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_saturation")}},model:{value:e.curEchartsData.camera_saturation,callback:function(t){e.$set(e.curEchartsData,"camera_saturation",t)},expression:"curEchartsData.camera_saturation"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-heibaipingheng"}),e._v("白平衡："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_light_mode"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_light_mode"],title:e.propsIsOk["camera_light_mode"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_light_mode")}},model:{value:e.curEchartsData.camera_light_mode,callback:function(t){e.$set(e.curEchartsData,"camera_light_mode",t)},expression:"curEchartsData.camera_light_mode"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-football_name"}),e._v("模式："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_mode"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_mode"],title:e.propsIsOk["camera_mode"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_mode")}},model:{value:e.curEchartsData.camera_mode,callback:function(t){e.$set(e.curEchartsData,"camera_mode",t)},expression:"curEchartsData.camera_mode"}},[a("el-option",{attrs:{label:"连续",value:0}})],1)],1),a("li",[a("i",{staticClass:"iconfont icon-geshi_tupianjpg"}),e._v("格式："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_workmode"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_workmode"],title:e.propsIsOk["camera_workmode"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_workmode")}},model:{value:e.curEchartsData.camera_workmode,callback:function(t){e.$set(e.curEchartsData,"camera_workmode",t)},expression:"curEchartsData.camera_workmode"}},[a("el-option",{attrs:{label:"JPG",value:1}})],1)],1)])]),a("div",{staticClass:"camera-right"},[a("ul",[a("li",[a("i",{staticClass:"iconfont icon-brightj2"}),e._v("亮度："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_brightness"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_brightness"],title:e.propsIsOk["camera_brightness"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_brightness")}},model:{value:e.curEchartsData.camera_brightness,callback:function(t){e.$set(e.curEchartsData,"camera_brightness",t)},expression:"curEchartsData.camera_brightness"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-texiao"}),e._v("特效："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_effect"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_effect"],title:e.propsIsOk["camera_effect"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_effect")}},model:{value:e.curEchartsData.camera_effect,callback:function(t){e.$set(e.curEchartsData,"camera_effect",t)},expression:"curEchartsData.camera_effect"}},e._l(e.camera_effectList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-puguang"}),e._v("曝光："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_autoexposure_level"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_autoexposure_level"],title:e.propsIsOk["camera_autoexposure_level"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_autoexposure_level")}},model:{value:e.curEchartsData.camera_autoexposure_level,callback:function(t){e.$set(e.curEchartsData,"camera_autoexposure_level",t)},expression:"curEchartsData.camera_autoexposure_level"}},e._l(e.selectList,(function(t){return a("el-option",{key:t,attrs:{label:t+"级",value:t}},[e._v(e._s(t)+" 级 ")])})),1)],1),a("li",[a("i",{staticClass:"iconfont icon-tiaoxingma"}),e._v("彩条："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_color_bar"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_color_bar"],title:e.propsIsOk["camera_color_bar"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_color_bar")}},model:{value:e.curEchartsData.camera_color_bar,callback:function(t){e.$set(e.curEchartsData,"camera_color_bar",t)},expression:"curEchartsData.camera_color_bar"}},[a("el-option",{attrs:{label:"关闭",value:0}}),a("el-option",{attrs:{label:"开启",value:1}})],1)],1),a("li",[a("i",{staticClass:"iconfont icon-quanping_huaban1"}),e._v("尺寸："),a("el-select",{class:"select-item "+(e.propsIsOk["camera_size"]?"":"invalid"),attrs:{placeholder:"请选择","popper-class":"option-list",disabled:!e.propsIsOk["camera_size"],title:e.propsIsOk["camera_size"]?"":"生效中"},on:{change:function(t){return e.handleCameraChange("camera_size")}},model:{value:e.curEchartsData.camera_size,callback:function(t){e.$set(e.curEchartsData,"camera_size",t)},expression:"curEchartsData.camera_size"}},e._l(e.camera_size,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1)])])])]),a("div",{staticClass:"rs-item"},[a("i"),a("div",{staticClass:"stop-history-update",attrs:{title:e.stopHistoryUpdate?"开启更新":"停止更新"},on:{click:function(){return e.stopHistoryUpdate=!e.stopHistoryUpdate}}},[a("i",{class:"iconfont "+(e.stopHistoryUpdate?"icon-sync":"icon-tingzhi1"),style:"color:"+(e.stopHistoryUpdate?"yellow":"red")})]),a("div",{attrs:{id:"history-data"}})])])])])},I=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left-aside"},[a("div",{staticClass:"ls-item speed-whool"},[a("i"),a("div",{attrs:{id:"speed-whool"}})]),a("div",{staticClass:"ls-item speed-every"},[a("i"),a("div",{attrs:{id:"speed-every"}})])])}],E=a("2909"),O=a("b85c"),L=a("ade3"),T=(a("99af"),a("d81d"),a("ac1f"),a("1276"),a("b0c0"),a("caad"),a("2532"),a("2b3d"),{data:function(){var e={cur_speed_whole:0,cur_speed_angle:0,set_speed_whole:0,set_speed_angle:0,set_speed_dir:0,set_dir_speed_whole:20,cur_speed_lq:0,cur_speed_rq:0,cur_speed_lh:0,cur_speed_rh:0,cur_duoji_1_angle:0,cur_duoji_2_angle:0,camera_mode:0,camera_workmode:1,camera_contrast:2,camera_saturation:4,camera_effect:0,camera_autoexposure_level:0,camera_light_mode:4,camera_brightness:3,camera_color_bar:0,camera_size:5,camera_is_abort:1,camera_frame:0,history_frame:[0],history_speed:[0],history_count:[1]};return{echartsData:e,options:[{backgroundColor:"transparent",title:{show:!0,text:"速度",left:"center",top:"5%",color:"#000000",fontSize:14,width:50,height:20},series:[{type:"gauge",min:0,max:200,startAngle:200,endAngle:-20,center:["50%","60%"],animationDurationUpdate:1e3,itemStyle:{color:"#77ddff",shadowColor:"rgba(0,138,255,0.45)",shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2},progress:{show:!0,width:10,roundCap:!1,itemStyle:{color:{type:"linear",x:0,y:0,x2:1,y2:1,colorStops:[{offset:0,color:"#aaf"},{offset:1,color:"#55f"}],global:!1}}},axisLine:{lineStyle:{width:10}},axisTick:{show:!0},splitLine:{length:10,lineStyle:{width:2,color:"#aaf"}},axisLabel:{distance:20,color:"#999",fontSize:9},pointer:{icon:"path://M2090.36389,615.30999 L2090.36389,615.30999 C2091.48372,615.30999 2092.40383,616.194028 2092.44859,617.312956 L2096.90698,728.755929 C2097.05155,732.369577 2094.2393,735.416212 2090.62566,735.56078 C2090.53845,735.564269 2090.45117,735.566014 2090.36389,735.566014 L2090.36389,735.566014 C2086.74736,735.566014 2083.81557,732.63423 2083.81557,729.017692 C2083.81557,728.930412 2083.81732,728.84314 2083.82081,728.755929 L2088.2792,617.312956 C2088.32396,616.194028 2089.24407,615.30999 2090.36389,615.30999 Z",length:"80%",width:10,offsetCenter:[0,"5%"]},anchor:{show:!0,showAbove:!0,size:15,itemStyle:{borderWidth:8}},detail:{valueAnimation:!0,fontSize:20,color:"#bbbbff",offsetCenter:["20%","60%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"},rich:{value:{fontSize:30,fontWeight:"bolder",color:"#eee"},unit:{fontSize:14,color:"#aaa",padding:[0,0,-10,10]}}},data:[{value:e.cur_speed_whole}]}],media:[{query:{maxWidth:340},option:{title:{show:!1,text:"速度",left:"center",top:"5%",color:"#000000",fontSize:14,width:50,height:20},series:[{type:"gauge",min:0,max:200,startAngle:200,endAngle:-20,center:["50%","60%"],animationDurationUpdate:1e3,itemStyle:{color:"#77ddff",shadowColor:"rgba(0,138,255,0.45)",shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2},progress:{show:!0,width:8,roundCap:!1,itemStyle:{color:{type:"linear",x:0,y:0,x2:1,y2:1,colorStops:[{offset:0,color:"#aaf"},{offset:1,color:"#55f"}],global:!1}}},axisLine:{lineStyle:{width:8}},axisTick:{show:!0},splitLine:{length:8,lineStyle:{width:1,color:"#aaf"}},axisLabel:{distance:10,color:"#999",fontSize:5},pointer:{icon:"path://M2090.36389,615.30999 L2090.36389,615.30999 C2091.48372,615.30999 2092.40383,616.194028 2092.44859,617.312956 L2096.90698,728.755929 C2097.05155,732.369577 2094.2393,735.416212 2090.62566,735.56078 C2090.53845,735.564269 2090.45117,735.566014 2090.36389,735.566014 L2090.36389,735.566014 C2086.74736,735.566014 2083.81557,732.63423 2083.81557,729.017692 C2083.81557,728.930412 2083.81732,728.84314 2083.82081,728.755929 L2088.2792,617.312956 C2088.32396,616.194028 2089.24407,615.30999 2090.36389,615.30999 Z",length:"80%",width:5,offsetCenter:[0,"5%"]},anchor:{show:!0,showAbove:!0,size:10,itemStyle:{borderWidth:4}},detail:{valueAnimation:!0,fontSize:10,color:"#bbbbff",offsetCenter:["20%","60%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"},rich:{value:{fontSize:15,fontWeight:"bolder",color:"#eee"},unit:{fontSize:8,color:"#aaa",padding:[0,0,-10,10]}}},data:[{value:e.cur_speed_whole}]}]}}]},{backgroundColor:"transparent",series:[{name:"左前轮",type:"gauge",color:["#f00"],min:-180,max:180,splitNumber:6,radius:"40%",animationDurationUpdate:1e3,center:["28%","28%"],axisLine:{lineStyle:{width:5,color:[[.5,"#ee5511"],[1,"#1155ee"]],shadowColor:"#7f7f7f",shadowBlur:2},backgroundColor:"none"},axisTick:{length:5,lineStyle:{color:"auto"},distance:1},splitLine:{length:3,lineStyle:{color:"rgba(255,255,255,0.7)"},distance:1},axisLabel:{borderRadius:1,color:"rgba(255,255,255,0.7)",padding:1,distance:10,fontSize:8},title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:[0,"95%"]},itemStyle:{color:"#1092ff"},detail:Object(L["a"])({shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"#000",textBorderWidth:1,textShadowBlur:1,textShadowColor:"#fff",textShadowOffsetX:0,textShadowOffsetY:0,paddingTop:5,fontFamily:"digital",fontSize:12,width:15,color:"#fff",rich:{},offsetCenter:[10,"70%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"}},"rich",{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:8,color:"#eee",padding:[0,0,-2,5]}}),data:[{value:e.cur_speed_lq,name:"左前轮"}]},{name:"右前轮",type:"gauge",color:["#f00"],min:-180,max:180,splitNumber:6,radius:"40%",animationDurationUpdate:1e3,center:["72%","28%"],axisLine:{lineStyle:{width:5,color:[[.5,"#ee5511"],[1,"#1155ee"]],shadowColor:"#7f7f7f",shadowBlur:2},backgroundColor:"none"},axisTick:{length:5,lineStyle:{color:"auto"},distance:1},splitLine:{length:3,lineStyle:{color:"rgba(255,255,255,0.7)"},distance:1},axisLabel:{borderRadius:1,color:"rgba(255,255,255,0.7)",padding:1,distance:10,fontSize:8},title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:[0,"95%"]},itemStyle:{color:"#1092ff"},detail:Object(L["a"])({shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"#000",textBorderWidth:1,textShadowBlur:1,textShadowColor:"#fff",textShadowOffsetX:0,textShadowOffsetY:0,paddingTop:5,fontFamily:"digital",fontSize:12,width:15,color:"#fff",rich:{},offsetCenter:[10,"70%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"}},"rich",{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:8,color:"#eee",padding:[0,0,-2,5]}}),data:[{value:e.cur_speed_rq,name:"右前轮"}]},{name:"左后轮",type:"gauge",color:["#f00"],min:-180,max:180,splitNumber:6,radius:"40%",animationDurationUpdate:1e3,center:["28%","75%"],axisLine:{lineStyle:{width:5,color:[[.5,"#ee5511"],[1,"#1155ee"]],shadowColor:"#7f7f7f",shadowBlur:2},backgroundColor:"none"},axisTick:{length:5,lineStyle:{color:"auto"},distance:1},splitLine:{length:3,lineStyle:{color:"rgba(255,255,255,0.7)"},distance:1},axisLabel:{borderRadius:1,color:"rgba(255,255,255,0.7)",padding:1,distance:10,fontSize:8},title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:[0,"95%"]},itemStyle:{color:"#1092ff"},detail:Object(L["a"])({shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"#000",textBorderWidth:1,textShadowBlur:1,textShadowColor:"#fff",textShadowOffsetX:0,textShadowOffsetY:0,paddingTop:5,fontFamily:"digital",fontSize:12,width:15,color:"#fff",rich:{},offsetCenter:[10,"70%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"}},"rich",{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:8,color:"#eee",padding:[0,0,-2,5]}}),data:[{value:e.cur_speed_lh,name:"左后轮"}]},{name:"右后轮",type:"gauge",color:["#f00"],min:-180,max:180,splitNumber:6,radius:"40%",animationDurationUpdate:1e3,center:["72%","75%"],axisLine:{lineStyle:{width:5,color:[[.5,"#ee5511"],[1,"#1155ee"]],shadowColor:"#7f7f7f",shadowBlur:2},backgroundColor:"none"},axisTick:{length:5,lineStyle:{color:"auto"},distance:1},splitLine:{length:3,lineStyle:{color:"rgba(255,255,255,0.7)"},distance:1},axisLabel:{borderRadius:1,color:"rgba(255,255,255,0.7)",padding:1,distance:10,fontSize:8},title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:[0,"95%"]},itemStyle:{color:"#1092ff"},detail:Object(L["a"])({shadowOffsetX:0,shadowOffsetY:0,textBorderColor:"#000",textBorderWidth:1,textShadowBlur:1,textShadowColor:"#fff",textShadowOffsetX:0,textShadowOffsetY:0,paddingTop:5,fontFamily:"digital",fontSize:12,width:15,color:"#fff",rich:{},offsetCenter:[10,"70%"],formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|cm/s}"}},"rich",{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:8,color:"#eee",padding:[0,0,-2,5]}}),data:[{value:e.cur_speed_rh,name:"右后轮"}]}]},{backgroundColor:"transparent",title:{show:!0,text:"舵机角度",left:"center",top:"5%",color:"#000000",fontSize:12,width:50,height:20},series:[{type:"gauge",radius:"50%",center:["30%","55%"],min:135,max:-135,startAngle:225,endAngle:-45,axisLine:{show:!0,lineStyle:{width:40,color:[[1,new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#5098ed88"},{offset:1,color:"#5098ed08"}])]]}},axisTick:{show:!0,splitNumber:2,length:5,distance:-45},splitLine:{show:!1},axisLabel:{show:!0,fontSize:6,distance:-35},pointer:{show:!1},detail:{show:!1}},{type:"gauge",radius:"50%",center:["30%","55%"],min:135,max:-135,startAngle:225,endAngle:-45,axisLine:{show:!0,lineStyle:{width:3,color:[[0,"#00FCF7"],[1,"#5098cc"]]}},pointer:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},detail:{show:!1}},{type:"gauge",animationDurationUpdate:1e3,radius:"20%",center:["30%","55%"],min:135,max:-135,startAngle:225,endAngle:-45,axisLine:{show:!1},pointer:{show:!0,icon:"roundRect",length:"220%",width:"10",offsetCenter:[0,0]},anchor:{show:!0,showAbove:!0,size:10,itemStyle:{color:"#5098aa"},icon:"circle"},itemStyle:{color:"rgba(0,255,255,0.3)"},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},detail:{show:!0,offsetCenter:["20%","140%"],fontSize:"8",color:"#08b5d6",formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|°}"},rich:{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:10,color:"#eee",padding:[0,0,2,3]}}},data:[{value:e.cur_duoji_1_angle,name:"一维舵机"}],title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:[0,"220%"]}},{type:"gauge",radius:"50%",center:["75%","55%"],min:45,max:-135,startAngle:225,endAngle:45,axisLine:{show:!0,lineStyle:{width:40,color:[[1,new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#5098ed38"},{offset:.5,color:"#5098ed88"},{offset:1,color:"#5098ed38"}])]]}},axisTick:{show:!0,splitNumber:2,length:5,distance:-45},splitLine:{show:!1},axisLabel:{show:!0,fontSize:6,distance:-35},pointer:{show:!1},detail:{show:!1}},{type:"gauge",radius:"50%",center:["75%","55%"],min:45,max:-135,startAngle:225,endAngle:45,axisLine:{show:!0,lineStyle:{width:3,color:[[0,"#00FCF7"],[1,"#5098cc"]]}},pointer:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},detail:{show:!1}},{type:"gauge",animationDurationUpdate:1e3,radius:"20%",center:["75%","55%"],min:45,max:-135,startAngle:225,endAngle:45,axisLine:{show:!1},pointer:{show:!0,icon:"roundRect",length:"220%",width:"10",offsetCenter:[0,0]},anchor:{show:!0,showAbove:!0,size:10,itemStyle:{color:"#5098aa"},icon:"circle"},itemStyle:{color:"rgba(0,255,255,0.3)"},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},detail:{show:!0,offsetCenter:["140%","0%"],fontSize:"8",color:"#08b5d6",formatter:function(e){return"{value|"+e.toFixed(0)+"}{unit|°}"},rich:{value:{fontSize:12,fontWeight:"bolder",color:"#eee"},unit:{fontSize:10,color:"#eee",padding:[0,0,2,3]}}},data:[{value:e.cur_duoji_2_angle,name:"二维舵机"}],title:{fontSize:10,fontColor:"#FFF",color:"#FFF",paddingTop:5,offsetCenter:["140%","80%"]}}]},{backgroundColor:"transparent",tooltip:{trigger:"axis",axisPointer:{type:"shadow",textStyle:{color:"#fff"}}},grid:{borderWidth:0,top:30,bottom:50,textStyle:{color:"#fff"}},legend:{x:"50%",top:"5%",textStyle:{color:"#90979c"},data:["帧率","速度"]},calculable:!0,xAxis:[{type:"category",axisLine:{lineStyle:{color:"rgba(204,187,225,0.5)"}},splitLine:{show:!1},axisTick:{show:!1},data:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]}],yAxis:[{type:"value",splitLine:{show:!1},axisLine:{lineStyle:{color:"rgba(204,187,225,0.5)"}}}],dataZoom:[{show:!0,height:20,xAxisIndex:[0],bottom:10,start:70,end:100,handleIcon:"path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z",handleSize:"110%",handleStyle:{color:"#5B3AAE"},textStyle:{color:"rgba(204,187,225,0.5)"},fillerColor:"rgba(67,55,160,0.4)",borderColor:"rgba(204,187,225,0.5)"},{type:"inside",show:!0,height:20,start:0,end:100}],series:[{name:"帧率",type:"line",symbolSize:6,symbol:"circle",itemStyle:{color:"#6f7de3"},data:e.history_frame},{name:"速度",type:"line",symbolSize:6,symbol:"circle",itemStyle:{color:"#c257F6"},data:e.history_speed}]}],camera_effectList:["正常","负片","黑白","偏红色","偏绿色","偏蓝色","复古"],camera_size:["160*120","176*144","320*240","400*240","352*288","640*480","800*600","1024*768","1280*800","1280*960","1440*900","1280*1024","1600*1200"],curEchartsData:{cur_speed_whole:0,cur_speed_angle:0,set_speed_whole:0,set_speed_angle:0,set_speed_dir:0,set_dir_speed_whole:20,cur_speed_lq:0,cur_speed_rq:0,cur_speed_lh:0,cur_speed_rh:0,cur_duoji_1_angle:0,cur_duoji_2_angle:0,camera_mode:0,camera_workmode:1,camera_contrast:2,camera_saturation:4,camera_effect:0,camera_autoexposure_level:0,camera_light_mode:4,camera_brightness:3,camera_color_bar:0,camera_size:5,camera_is_abort:1,camera_frame:0,history_frame:[0],history_speed:[0],history_count:[1]},els:[],myEcharts:[],wss:null,dragEl:null,gunEl:null,maxDistance:80,statesData:null,DeviceName:"test2",ProductId:"K8LG8U17CW",clientToken:"",propsIsOk:{},propsTime:{},selectList:[0,1,2,3,4],stopHistoryUpdate:!1,preImgData:null,syncProps:["set_speed_whole","set_speed_dir","set_dir_speed_whole","cur_duoji_1_angle","cur_duoji_2_angle","camera_mode","camera_workmode","camera_contrast","camera_saturation","camera_effect","camera_autoexposure_level","camera_light_mode","camera_brightness","camera_color_bar","camera_size","camera_is_abort"],hasReceiveImgData:!1,mqttIsConnected:!1,mqttIsConnectedTime:0,controlIsConnected:!1,controlIsConnectedTime:0,speedLevel:8,carSelectList:[],curSelectCar:"",historyTimer:0,isActive:!1}},watch:{echartsData:{handler:"putEchartsData",deep:!0},"curEchartsData.camera_is_abort":function(){this.hasReceiveImgData=!1}},mounted:function(){this.mapElementToEcharts(),this.drawAllEcharts(),this.openWebSocket(),this.initDrag(),this.setMove=this.throttle(this.setMove,200)},activated:function(){this.isActive=!0,this.statesData=null,this.initShowHistory(),this.syncData(),this.syncDefaultConfig(),this.getDeviceByUser()},deactivated:function(){this.isActive=!1,clearInterval(this.historyTimer),clearTimeout(this.mqttIsConnectedTime),clearTimeout(this.controlIsConnectedTime)},beforeDestroy:function(){this.wss&&this.wss.close(),this.wss=null,this.els=null,this.myEcharts=null,this.dragEl=null,this.gunEl=null,window.onresize=null},computed:{K:function(){return 160/this.speedLevel/this.maxDistance}},methods:{putProps:function(e,t){var a=localStorage.getItem("iotc_user")||"",o=localStorage.getItem("iotc_secret")||"";return this.$http.put(e,{Payload:JSON.stringify({clientToken:this.clientToken,method:"control",params:t}),DeviceName:this.DeviceName,ProductId:this.ProductId,Topic:"$thing/down/property/".concat(this.ProductId,"/").concat(this.DeviceName),user:a,secret:o})},getHistoryProp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=localStorage.getItem("iotc_user")||"",o=localStorage.getItem("iotc_secret")||"";return this.$http.post("/historyPropValue",{DeviceName:this.DeviceName,FieldName:e,Limit:t,user:a,secret:o})},getSyncData:function(){var e=localStorage.getItem("iotc_user")||"",t=localStorage.getItem("iotc_secret")||"";return this.$http.post("/get/sync",{user:e,secret:t})},getDefaultConfig:function(){var e=localStorage.getItem("iotc_user")||"",t=localStorage.getItem("iotc_secret")||"";return this.$http.post("/get/default",{user:e,secret:t})},getDeviceList:function(){var e=localStorage.getItem("iotc_user")||"",t=localStorage.getItem("iotc_secret")||"";return this.$http.post("/public/deviceList",{user:e,secret:t})},putMove:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.putMove.timer){var s=localStorage.getItem("iotc_user")||"",r=localStorage.getItem("iotc_secret")||"";a&&(this.putMove.timer=setTimeout((function(){t.putMove.timer=0}),o));var n={set_speed_whole:"w-0",set_speed_angle:"a-0",set_speed_dir:"d-0",set_dir_speed_whole:"w-1"},i={};for(var c in e)i[n[c]]=e[c];return this.$http.post("/move",{user:s,secret:r,data:i,debounce:a,time:o})}},showHistoryData:function(e,t){var a=this;return Object(b["a"])(regeneratorRuntime.mark((function o(){var s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,a.getHistoryProp(e);case 3:s=o.sent,o.next=8;break;case 6:o.prev=6,o.t0=o["catch"](0);case 8:s&&s.data&&s.data.Results instanceof Array&&(a.echartsData[t]=s.data.Results.map((function(e){return+e.Value})));case 9:case"end":return o.stop()}}),o,null,[[0,6]])})))()},propsChange:function(e){var t=arguments,a=this;return Object(b["a"])(regeneratorRuntime.mark((function o(){var s,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return s=t.length>1&&void 0!==t[1]&&t[1],s||(a.propsIsOk[e]=!1,a.propsTime[e]=setTimeout((function(){a.propsIsOk[e]=!0,a.curEchartsData[e]=a.echartsData[e]}),8e3)),o.prev=2,r=Object(L["a"])({},e,a.curEchartsData[e]),o.next=6,a.putProps("/putProps",r);case 6:o.sent,o.next=11;break;case 9:o.prev=9,o.t0=o["catch"](2);case 11:case"end":return o.stop()}}),o,null,[[2,9]])})))()},syncDefaultConfig:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getDefaultConfig();case 3:a=t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:a.data&&a.data.data&&(o=JSON.parse(a.data.data),Object.assign(e.curEchartsData,o));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},syncData:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getSyncData();case 3:a=t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:a.data.data&&(o=a.data.data.split(","),e.syncProps=o);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getDeviceByUser:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getDeviceList();case 3:a=t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:a.data&&a.data.data&&(e.carSelectList=JSON.parse(a.data.data)||[],o=localStorage.getItem("iotc_secret"),o&&e.carSelectList.forEach((function(t){t.secret===o&&(e.curSelectCar=t.name)}))),e.showMessage(a.data.state,a.data.message);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},handleChangeCar:function(e){localStorage.setItem("iotc_secret",e)},handleChangeCameraState:function(e){this.curEchartsData.camera_is_abort=e,this.handleCameraChange("camera_is_abort")},handleSpeedLevel:function(e){this.speedLevel=e},handleSyncData:function(e){if("car"===e){if(this.statesData){var t,a=Object(O["a"])(this.syncProps);try{for(a.s();!(t=a.n()).done;){var o=t.value;this.curEchartsData[o]=this.echartsData[o]}}catch(i){a.e(i)}finally{a.f()}}}else{this.hasReceiveImgData=!1;var s,r=Object(O["a"])(this.syncProps);try{for(r.s();!(s=r.n()).done;){var n=s.value;"history_frame"!==n&&"history_speed"!==n||contniue,this.propsChange(n)}}catch(i){r.e(i)}finally{r.f()}}},handleSaveImg:function(){var e=document.createElement("a");e.style.display="none",e.href=this.preImgData,e.setAttribute("download","图片".concat(Date.now(),".jpg")),document.body.appendChild(e),e.click()},handleDirChange:function(e){this.curEchartsData.set_speed_dir=e,e?this.putMove({set_dir_speed_whole:this.curEchartsData.set_dir_speed_whole,set_speed_dir:e}):this.resetMove()},handleCameraChange:function(e){this.propsChange(e)},handleDuojiReset:function(){this.curEchartsData.cur_duoji_1_angle=0,this.curEchartsData.cur_duoji_2_angle=0,this.propsChange("cur_duoji_1_angle"),this.propsChange("cur_duoji_2_angle")},handleChangeDuoji:function(e){this.propsChange(e)},showMessage:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case 0:a&&this.$message.success(t);break;case-1:break;default:a&&this.$message.warning(t);break}},setEl:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.dragEl.display="none",this.gunEl.display="none",this.dragEl.style.left=e+"px",this.dragEl.style.top=t+"px",this.gunEl.style.width=a+"px",this.dragEl.display="block",this.gunEl.display="block"},resetMove:function(){this.putMove({set_speed_whole:0,set_speed_angle:0,set_speed_dir:0,set_dir_speed_whole:this.curEchartsData.set_dir_speed_whole},!0,500)},throttle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=null;return function(){var s=arguments;if(o)return Promise.resolve();var r=this;return a?(a=!1,new Promise((function(t,a){o=setTimeout((function(){t(e.call.apply(e,[r].concat(Object(E["a"])(s)))),o=null}))}))):new Promise((function(a,n){o=setTimeout((function(){a(e.call.apply(e,[r].concat(Object(E["a"])(s)))),o=null}),t)}))}},setMove:function(e,t,a,o){e*=this.K,0===a&&0===o?t=0:a>=0&&o>=0?t=270-180*t/Math.PI:a>=0&&o<=0?t=270+180*t/Math.PI:a<=0&&o>=0?t=90+180*t/Math.PI:a<=0&&o<=0&&(t=90-180*t/Math.PI),this.putMove({set_speed_whole:Math.round(e),set_speed_angle:Math.round(t),set_speed_dir:0})},pollMqttState:function(){var e=this;this.mqttIsConnected||this.$notify({message:"小车已连接MQTT服务器",duration:2e3,customClass:"notify-box"}),this.mqttIsConnected=!0,sessionStorage.setItem("iotc_state",JSON.stringify({mqttIsConnected:!0,controlIsConnected:this.controlIsConnected})),this.mqttIsConnectedTime&&clearTimeout(this.mqttIsConnectedTime),this.mqttIsConnectedTime=setTimeout((function(){e.mqttIsConnected=!1,sessionStorage.setItem("iotc_state",JSON.stringify({mqttIsConnected:!1,controlIsConnected:e.controlIsConnected})),e.statesData=null,e.$notify({message:"MQTT服务器连接已断开",duration:2e3,customClass:"notify-box"})}),1e4)},pollControlState:function(){var e=this;this.controlIsConnected||this.$notify({message:"小车已连接云控制服务器",duration:2e3,customClass:"notify-box"}),this.controlIsConnected=!0,sessionStorage.setItem("iotc_state",JSON.stringify({mqttIsConnected:this.mqttIsConnected,controlIsConnected:!0})),this.controlIsConnectedTime&&clearTimeout(this.controlIsConnectedTime),this.controlIsConnectedTime=setTimeout((function(){e.controlIsConnected=!1,sessionStorage.setItem("iotc_state",JSON.stringify({mqttIsConnected:e.mqttIsConnected,controlIsConnected:!1})),e.hasReceiveImgData=!1,e.$notify({message:"云控制服务器连接已断开",duration:2e3,customClass:"notify-box"})}),1e4)},initShowHistory:function(){var e=this;this.historyTimer=setInterval((function(){e.stopHistoryUpdate||(e.syncProps.includes("history_frame")&&e.showHistoryData("camera_frame","history_frame"),e.syncProps.includes("history_speed")&&e.showHistoryData("cur_speed_whole","history_speed"))}),2e3)},setRotate:function(e,t,a){this.gunEl.display="none",e>=0&&t>=0?this.gunEl.style.transform="rotate(".concat(180*a/Math.PI,"deg)"):e<=0&&t<=0?this.gunEl.style.transform="rotate(".concat(180*(Math.PI+a)/Math.PI,"deg)"):e<=0&&t>=0?this.gunEl.style.transform="rotate(".concat(180*(Math.PI-a)/Math.PI,"deg)"):e>=0&&t<=0&&(this.gunEl.style.transform="rotate(".concat(180*-a/Math.PI,"deg)")),this.gunEl.display="block"},getDegree:function(e,t,a,o){return a===e?Math.PI/2:o===t?0:Math.abs(Math.atan((o-t)/(a-e)))},getDistance:function(e,t,a,o){var s=Math.abs(t-o),r=Math.abs(e-a);return s/Math.sin(Math.atan(s/r))||r},initDrag:function(){var e=this;this.dragEl=document.getElementById("drag-pointer"),this.gunEl=document.getElementById("drag-gun");var t,a,o,s,r,n,i=this.dragEl.offsetLeft,c=this.dragEl.offsetTop,l=!1;t=a=o=s=r=n=0;var u=function(e){return function(o){l=!0,t="pc"==e?o.pageX:o.changedTouches[0].pageX,a="pc"==e?o.pageY:o.changedTouches[0].pageY}};this.dragEl.onmousedown=u("pc"),this.dragEl.ontouchstart=u();var d=function(t){l=!1,e.setEl(i,c),e.resetMove()};this.dragEl.onmouseup=d,this.dragEl.ontouchend=d,this.dragEl.parentElement.parentElement.onmouseup=d,this.dragEl.parentElement.parentElement.ontouchend=d;var h=function(u){return function(d){if(l){var h="pc"==u?d.pageX:d.changedTouches[0].pageX,p="pc"==u?d.pageY:d.changedTouches[0].pageY;r=e.getDegree(t,a,h,p),n=e.getDistance(t,a,h,p),n>e.maxDistance?(n=e.maxDistance,o=Math.cos(r)*(h>t?e.maxDistance:-e.maxDistance),s=Math.sin(r)*(p>a?e.maxDistance:-e.maxDistance)):(o=h-t,s=p-a),e.setRotate(o,s,r),e.setEl(i+o,c+s,n+5),e.setMove(n,r,o,s)}}};this.dragEl.parentElement.parentElement.onmousemove=h("pc"),this.dragEl.parentElement.parentElement.ontouchmove=h()},putEchartsData:function(){if(this.statesData){var e,t=this.options,a=this.echartsData,o=this.curEchartsData;if(t[0].series[0].data[0].value=a.cur_speed_whole,t[1].series[0].data[0].value=a.cur_speed_lq,t[1].series[1].data[0].value=a.cur_speed_rq,t[1].series[2].data[0].value=a.cur_speed_lh,t[1].series[3].data[0].value=a.cur_speed_rh,t[2].series[2].data[0].value=-a.cur_duoji_1_angle,t[2].series[5].data[0].value=-a.cur_duoji_2_angle,!this.stopHistoryUpdate)this.syncProps.includes("history_frame")&&(e=Object(E["a"])(a.history_frame||[0]).reverse(),t[3].series[0].data=e),this.syncProps.includes("history_speed")&&(e=Object(E["a"])(a.history_speed||[0]).reverse(),t[3].series[1].data=e);for(var s in o.camera_frame=a.camera_frame,a)void 0===this.propsIsOk[s]&&this.$set(this.propsIsOk,s,!0),void 0===this.propsTime[s]&&this.$set(this.propsTime,s,0),o[s]===a[s]&&(this.propsIsOk[s]=!0,clearTimeout(this.propsTime[s]));for(var r in this.els)this.stopHistoryUpdate&&3==r||this.myEcharts[r].setOption(t[r])}},syncPushData:function(e){var t={};for(var a in e)this.syncProps.includes(a)&&(t[a]=e[a]);Object.assign(this.echartsData,t)},updateCarState:function(e){var t=this;this.pollMqttState(),!this.statesData&&this.isActive&&setTimeout((function(){t.handleSyncData("cloud")}),1e3),this.statesData=e,this.clientToken=this.statesData.payload.clientToken,this.syncPushData(this.statesData.payload.params)},keepWssConnect:function(e){var t=this,a=localStorage.getItem("iotc_secret")||"";return!("ping"!==e||!a)&&(setTimeout((function(){t.wss.send("pong:".concat(a))}),3e3),!0)},wssReceiveMessage:function(e){if(!this.keepWssConnect(e.data))if("string"===typeof e.data){try{e=JSON.parse(e.data)||{}}catch(a){e={}}if("states"===e.type){if(this.updateCarState(e.data),sessionStorage.getItem("reset_wifi2")){sessionStorage.removeItem("reset_wifi2");var t={reset_wifi2:1};this.putProps("/putProps",t)}}else"connect"===e.type&&(this.pollControlState(),this.controlIsConnected=e.data.controlIsConnected)}else this.isActive&&(this.preImgData=URL.createObjectURL(e.data),document.getElementById("imgData").src=this.preImgData,this.hasReceiveImgData=!0)},openWebSocket:function(){var e=this;this.wss=new WebSocket("wss://wlw.5102it.cn/websocket"),this.wss.onopen=function(){console.log("wss：连接建立")},this.wss.onmessage=this.wssReceiveMessage,this.wss.onerror=function(t){e.wss.close(),console.log("wss：连接出错")},this.wss.onclose=function(t,a){console.log("wss：连接关闭"),setTimeout((function(){console.log("ws：重试中..."),e.openWebSocket()}),1e3)}},mapElementToEcharts:function(){this.els.push(document.getElementById("speed-whool")),this.els.push(document.getElementById("speed-every")),this.els.push(document.getElementById("duoji-angle")),this.els.push(document.getElementById("history-data"))},drawAllEcharts:function(){var e=this;for(var t in this.els){var a=this.$echarts.init(this.els[t],"dark");a.setOption(this.options[t]),this.myEcharts.push(a)}window.onresize=function(t){e.initDrag(),e.myEcharts.forEach((function(e){return e.resize()}))}}}}),j=T,z=(a("5328"),a("ae95"),Object(n["a"])(j,D,I,!1,null,"1c5883dc",null)),M=z.exports,P=function(){return a.e("group-foo").then(a.bind(null,"8c43"))};o["default"].use(u["a"]);var F=[{path:"/login",name:"login",component:k,meta:{isPublic:!0}},{path:"/",name:"main",redirect:"/login"},{path:"/layout",name:"layout",component:g,children:[{path:"/home",name:"home",component:M,meta:{keepAlive:!0}},{path:"/config",name:"config",component:P,meta:{keepAlive:!0}}]}],$=new u["a"]({routes:F});$.beforeEach((function(e,t,a){if(!e.meta.isPublic&&!localStorage.getItem("iotc_token"))return a("/login");a()}));var A=$,q=(a("46a1"),a("450d"),a("e5f2")),R=a.n(q),W=(a("0fb7"),a("f529")),B=a.n(W),N=(a("f225"),a("89a9")),X=a.n(N),Y=(a("016f"),a("486c")),H=a.n(Y),U=(a("6611"),a("e772")),J=a.n(U),G=(a("1f1a"),a("4e4b")),K=a.n(G),Q=(a("b5c2"),a("20cf")),V=a.n(Q),Z=(a("e960"),a("b35b")),ee=a.n(Z),te=(a("1951"),a("eedf")),ae=a.n(te),oe=(a("10cb"),a("f3ad")),se=a.n(oe),re=(a("b8e0"),a("a4c4")),ne=a.n(re),ie=(a("8bd8"),a("4cb2")),ce=a.n(ie),le=(a("4ca3"),a("443e")),ue=a.n(le);o["default"].use(ue.a),o["default"].use(ce.a),o["default"].use(ne.a),o["default"].use(se.a),o["default"].use(ae.a),o["default"].use(ee.a),o["default"].use(V.a),o["default"].use(K.a),o["default"].use(J.a),o["default"].use(H.a),o["default"].use(X.a),o["default"].prototype.$message=B.a,o["default"].prototype.$notify=R.a;var de=a("aa74"),he=a("3b8f"),pe=a("3620"),fe=a("9be8"),me=a("4b2a"),ge=a("104d"),_e=a("f95e");de["use"]([pe["install"],fe["install"],me["install"],ge["install"],_e["install"]]),o["default"].prototype.$echarts=he;a("6672");var ve,be=a("bc3a"),we=a.n(be);o["default"].config.productionTip=!1,o["default"].prototype.$http=we.a.create({baseURL:"http://49.234.11.185"}),o["default"].prototype.$http.interceptors.request.use((function(e){return e.headers.common["Authorization"]="Bearer ".concat(localStorage.getItem("iotc_token")||""),e})),o["default"].prototype.$http.interceptors.response.use((function(e){return-1!==e.data.state||ve||(localStorage.removeItem("iotc_token"),ye.$message.warning("登录已过期,请重新登录！"),ye.$router.push("/login"),ve=setTimeout((function(){ve=null}),5e3)),e}));var ye=new o["default"]({router:A,render:function(e){return e(l)}}).$mount("#app")},"57e7":function(e,t,a){},5924:function(e,t,a){e.exports=a("6e92")(113)},6672:function(e,t,a){},"69dc":function(e,t,a){"use strict";a("180a")},"6b7c":function(e,t,a){e.exports=a("6e92")(260)},"6e92":function(e,t){e.exports=library_4c6c457586},"7f4d":function(e,t,a){e.exports=a("6e92")(203)},"85ec":function(e,t,a){},"92fa":function(e,t,a){e.exports=a("6e92")(318)},"9be8":function(e,t,a){e.exports=a("6e92")(656)},a19f:function(e,t,a){},aa74:function(e,t,a){e.exports=a("6e92")(304)},ae95:function(e,t,a){"use strict";a("a19f")},c284:function(e,t,a){e.exports=a("6e92")(599)},d010:function(e,t,a){e.exports=a("6e92")(141)},e450:function(e,t,a){e.exports=a("6e92")(642)},e772:function(e,t,a){e.exports=a("6e92")(602)},eedf:function(e,t,a){e.exports=a("6e92")(591)},f3ad:function(e,t,a){e.exports=a("6e92")(262)},f95e:function(e,t,a){e.exports=a("6e92")(645)}});